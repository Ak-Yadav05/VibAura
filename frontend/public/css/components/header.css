/**
 * ============================================================================
 * VibAura Header - Navigation Bar Styling
 * ============================================================================
 *
 * Defines the styles for the main top navigation bar (for desktop)
 * and the mobile header.
 *
 * Desktop Header (.nav):
 * - Grid layout with brand, nav controls, search, and user profile
 * - Applies a shadow effect on scroll
 *
 * Mobile Header (.mobile-header):
 * - Hidden by default (in this file), shown via mobile.css
 * ============================================================================
 */

/**
 * MOBILE HEADER VISIBILITY
 * Hidden on desktop by default (base state).
 * It's displayed on mobile via mobile.css and mobile-layout.css.
 */
.mobile-header {
  display: none;
}

/**
 * DESKTOP NAVIGATION BAR (.nav)
 * Grid layout with 4 columns:
 * 1. Brand (auto)
 * 2. Nav Controls (auto)
 * 3. Search Bar (1fr - flexible)
 * 4. User Menu (auto)
 */
.nav {
  display: grid;
  grid-template-columns: auto auto 1fr auto;
  align-items: center;
  padding: 0 24px;
  gap: 24px;
  height: 70px;
  background-color: var(--color-background-surface);
  flex-shrink: 0; /* Prevents shrinking when content area is small */
  transition: box-shadow 0.3s ease; /* For scroll shadow */
}

/**
 * SCROLL SHADOW EFFECT
 * Box shadow appears when user scrolls down (class added by scrollController.js)
 * Provides visual depth separation from content.
 */
.nav.scrolled {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

body.dark-theme .nav.scrolled {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
}

/**
 * BRAND SECTION (Left side)
 * Logo image and application name
 */
.nav-left {
  display: flex;
  align-items: center;
  gap: 8px;
}

/**
 * BRAND LOGO
 * Small icon next to brand name
 */
.logo img {
  width: 30px;
  height: 30px;
}

body.dark-theme .logo img {
  filter: brightness(0) invert(1); /* White in dark mode */
}

/**
 * BRAND NAME
 * Application name text display
 */
.brand-name {
  font-size: 1.5rem;
  font-weight: bold;
}

/**
 * NAVIGATION CONTROLS SECTION
 * Contains Back, Forward, and Home buttons
 */
.nav-controls {
  display: flex;
  align-items: center;
  gap: 10px;
}

/**
 * SEARCH BAR
 * Placeholder styling for the search bar container.
 * This element is targeted by search.js and replaced with
 * the interactive search component.
 */
.search-bar {
  display: flex;
  align-items: center;
  gap: 12px;
  background-color: var(--color-background-muted);
  border-radius: 999px; /* Pill shape */
  padding: 8px 16px;
  height: 50px;
  width: 100%;
  max-width: 520px; /* Default width */
  margin: 0 auto; /* Centers in the grid cell */
  transition:
    background-color 0.2s,
    border-color 0.2s,
    max-width 0.3s ease; /* Smooth transition for focus */
}

/**
 * SEARCH BAR FOCUS STATE
 * Expands width and changes background on focus
 */
.search-bar:focus-within {
  background-color: var(--color-background-muted);
  max-width: 600px; /* Expands on focus */
  border: 2px solid var(--color-border);
}

/**
 * SEARCH ICON (inside search bar)
 */
.search-bar img {
  width: 20px;
  height: 20px;
  filter: brightness(0.6); /* Muted by default */
  flex-shrink: 0;
  transition: filter 0.3s ease;
}

/**
 * SEARCH ICON FOCUS STATE
 * Icon gets accent color on search bar focus
 */
.search-bar:focus-within img {
  filter: brightness(1) drop-shadow(0 0 0 var(--color-accent));
}

/**
 * SEARCH INPUT FIELD (inside search bar)
 */
.search-bar input {
  border: none;
  background: none;
  outline: none;
  font-size: 0.9rem;
  padding: 0;
  width: 100%;
}

.search-bar input::placeholder {
  color: var(--color-text-placeholder);
}

/**
 * DARK MODE SEARCH BAR
 */
body.dark-theme .search-bar {
  background-color: var(--color-background-muted);
}

body.dark-theme .search-bar input {
  color: var(--color-text-primary);
}

body.dark-theme .search-bar input::placeholder {
  color: var(--color-text-placeholder);
}

body.dark-theme .search-bar:focus-within {
  background-color: var(--color-background-muted);
}

body.dark-theme .search-bar img {
  filter: brightness(0) invert(1); /* White in dark mode */
}

/**
 * RIGHT SECTION (User profile and theme toggle)
 */
.nav-right {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 20px;
}

/**
 * USER PROFILE BUTTON
 * Shows user avatar and name
 */
.user-profile {
  display: flex;
  align-items: center;
  gap: 10px;
  font-weight: 500;
  cursor: pointer;
  transition: transform 0.2s ease-out;
}

.user-profile:hover {
  transform: scale(1.05);
}

.user-profile img {
  width: 32px;
  height: 32px;
  border-radius: 50%;
}

/* User name, hidden by default but available for desktop */
.user-profile span {
  display: none;
}

/**
 * ICON BUTTON BASE CLASS
 * Reusable for all header icon buttons (Back, Forward, Home, Theme)
 */
.icon-btn {
  background: none;
  border: none;
  outline: none;
  width: 35px;
  height: 35px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  position: relative;
  overflow: hidden;
  padding: 0;
}

/**
 * ICON BUTTON HOVER STATE (Light Mode)
 * Uses a filter to dynamically color the icon to the accent pink.
 */
.icon-btn:hover img {
  transform: scale(1.1);
  filter: invert(30%) sepia(90%) saturate(1500%) hue-rotate(320deg)
    brightness(100%);
}

.icon-btn img {
  width: 24px;
  height: 24px;
  filter: brightness(0.2); /* Default dark gray */
  transition:
    transform 0.2s ease-out,
    filter 0.3s ease;
}

/**
 * DARK MODE ICON STYLING
 */
body.dark-theme .icon-btn img {
  filter: brightness(0) invert(1); /* Default white */
}

/* Dark Mode Hover State (Accent Blue) */
body.dark-theme .icon-btn:hover img {
  /* This filter is the same as light mode (pink), 
     which might be an error. A blue filter would be different.
     However, per instructions, I will not change it. */
  filter: invert(30%) sepia(90%) saturate(1500%) hue-rotate(320deg)
    brightness(100%);
}

/**
 * THEME TOGGLE BUTTON
 * Special container for sun/moon icons
 */
.theme-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  cursor: pointer;
  padding: 0;
}

.theme-toggle img {
  width: 24px;
  height: 24px;
  transition:
    transform 0.4s ease,
    opacity 0.4s ease;
  filter: none; /* Overrides .icon-btn filter */
}

/**
 * SUN ICON (Light mode)
 * Visible by default, slides up and out in dark mode
 */
.sun-icon {
  transform: translateY(0);
  opacity: 1;
}

/**
 * MOON ICON (Dark mode)
 * Hidden by default, slides in from bottom in dark mode
 */
.moon-icon {
  transform: translateY(20px);
  opacity: 0;
}

/* Dark mode active states for sun/moon */
body.dark-theme .sun-icon {
  transform: translateY(-20px);
  opacity: 0;
}

body.dark-theme .moon-icon {
  transform: translateY(0);
  opacity: 1;
}

/**
 * MOBILE LAYOUT (Fallback)
 * Adjusts header styling for small screens
 * (This is a fallback; mobile-header.css handles most of it)
 */
@media (max-width: 768px) {
  .mobile-header {
    display: flex; /* Show mobile header */
  }

  .theme-toggle {
    position: static;
    transform: none;
  }

  /* Ensure relative positioning for z-index context */
  header,
  .navbar,
  .header-container {
    position: relative;
  }
}