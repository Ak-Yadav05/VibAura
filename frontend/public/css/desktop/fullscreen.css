/**
 * ============================================================================
 * VibAura Desktop Fullscreen Player
 * ============================================================================
 *
 * Minimalist full-screen overlay player.
 * Features:
 * - Glassmorphism-inspired subtle transparency
 * - Balanced whitespace and large clear typography
 * - Responsive layout centered on screen
 * - Adaptive to light/dark themes via CSS variables
 *
 * z-index: 200 (above mini-player and content)
 * NO media queries (desktop-only file, loaded via index.css for >768px)
 * ============================================================================
 */

.fullscreen-player {
  position: fixed;
  inset: 0;
  /* Use a high-opacity surface color for a solid but clean look.
     Could use backdrop-filter if we wanted transparency over the page,
     but a solid background is cleaner for a "focus mode". */
  background-color: var(--color-background-surface);
  display: none;
  flex-direction: column;
  z-index: var(--z-fullscreen-player);
  opacity: 0;
  transition: opacity 0.3s ease;
}

body.fullscreen-open .fullscreen-player {
  display: flex;
  opacity: 1;
}

/**
 * ============================================================================
 * LAYOUT GRID
 * ============================================================================
 * A 3-row layout: Header (Close), Body (Art + Controls), Footer (Empty/Spacing)
 */

/* HEADER: Close button aligned top-right or top-left */
.fullscreen-player-header {
  display: flex;
  justify-content: flex-end;
  /* Clean minimalist look: close button on right */
  padding: 32px 40px;
  flex-shrink: 0;
}

.close-fullscreen-btn {
  background: transparent;
  border: 1px solid transparent;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.close-fullscreen-btn img {
  width: 24px;
  height: 24px;
  filter: brightness(0.5);
  /* Mutable icon color */
  transition: filter 0.2s ease;
}

.close-fullscreen-btn:hover {
  background-color: var(--color-background-muted);
  transform: scale(1.05);
}

.close-fullscreen-btn:hover img {
  filter: brightness(1);
  /* Full contrast on hover */
}

/* MAIN CONTENT BODY */
.fullscreen-player-body {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: clamp(20px, 4vh, 48px);
  /* Responsive gap */
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  /* Center horizontally */
  padding: 0 40px 20px 40px;
  overflow-y: auto;
  /* Allow scrolling on very short screens */
  min-height: 0;
  /* Important for flex child scrolling */
}

/**
 * ============================================================================
 * COMPONENT: ALBUM ART
 * ============================================================================
 */
.album-art-disc {
  /* Dynamic size: smaller min size, scalable max */
  width: clamp(200px, 35vh, 450px);
  height: clamp(200px, 35vh, 450px);
  border-radius: 50%;
  /* Classic vinyl look */
  overflow: hidden;
  /* Deep shadow */
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.4);
  background: var(--color-background-muted);
  transform: translateZ(0);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  flex-shrink: 0;
  /* Don't squash the art */
}

.album-art-disc img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 50%;
  /* Animation setup */
  animation: rotate 20s linear infinite;
  animation-play-state: paused;
  /* Default paused */
}

/* Rotation Animation Keyframes */
@keyframes rotate {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(360deg);
  }
}

/* Active state triggered by JS adding .playing class to parent */
.album-art-disc.playing img {
  animation-play-state: running;
}

/**
 * ============================================================================
 * COMPONENT: SONG INFO
 * ============================================================================
 */
.fs-info-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  gap: 12px;
  max-width: 800px;
  width: 100%;
  /* Ensure full width for centering context */
}

.song-details-large {
  display: flex;
  flex-direction: column;
  align-items: center;
  /* Explicit cross-axis alignment */
  gap: 8px;
  width: 100%;
}

.song-details-large .song-title {
  font-size: clamp(1.2rem, 2.5vw, 2.5rem);
  /* Smaller minimum font size */
  font-weight: 700;
  color: var(--color-text-primary);
  letter-spacing: -0.02em;
  line-height: 1.2;
  text-align: center;
  /* Explicit text alignment */
}

.song-details-large .song-artist {
  font-size: clamp(0.9rem, 1.25vw, 1.25rem);
  font-weight: 500;
  color: var(--color-accent);
  opacity: 0.9;
  text-align: center;
}

/* Favorite button positioned subtly next to info or hidden/repositioned.
   For minimalism, let's keep it nearby but subtle. */
#fullscreen-favorite-btn {
  display: none !important;
  /* User requested removal */
  margin-top: 8px;
  width: 40px;
  height: 40px;
  opacity: 0.6;
  transition: opacity 0.2s ease, transform 0.2s ease;
  background: transparent;
  border: none;
  cursor: pointer;
  /* display: flex; */
  align-items: center;
  justify-content: center;
}

#fullscreen-favorite-btn:hover {
  opacity: 1;
  transform: scale(1.1);
}

#fullscreen-favorite-btn img {
  width: 24px;
  height: 24px;
  /* Filter handled by global utility or JS toggle */
}

/**
 * ============================================================================
 * COMPONENT: PROGRESS BAR
 * ============================================================================
 */
.progress-container-large {
  width: 100%;
  max-width: 600px;
  /* Constrained width for readability */
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* The wrapper needs to center the range input */
.progress-bar-wrapper {
  width: 100%;
  display: flex;
  align-items: center;
}

#fullscreen-progress-bar {
  width: 100%;
  height: 6px;
  /* Slightly thicker for ease of use */
  border-radius: 3px;
  cursor: pointer;
  /* Reset standard styles first */
  -webkit-appearance: none;
  appearance: none;
  background: var(--color-border);
  /* Fallback */
  /* Linear gradient fill: accent color up to --progress, then border color */
  background: linear-gradient(to right, var(--color-accent) var(--progress, 0%), var(--color-border) var(--progress, 0%));
  outline: none;
  transition: height 0.2s ease;
}

#fullscreen-progress-bar:hover {
  height: 8px;
  /* Expand on hover */
}

/* Progress Bar Thumb */
#fullscreen-progress-bar::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 0;
  /* Hidden by default for ultra-minimalism */
  height: 0;
  background: var(--color-accent);
  border-radius: 50%;
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  box-shadow: 0 0 0 rgba(0, 0, 0, 0);
}

/* Show thumb on hover */
#fullscreen-progress-bar:hover::-webkit-slider-thumb {
  width: 14px;
  height: 14px;
  box-shadow: 0 0 0 4px rgba(var(--color-accent-rgb, 100, 100, 100), 0.2);
}

/* Firefox Support */
#fullscreen-progress-bar::-moz-range-thumb {
  width: 0;
  height: 0;
  background: var(--color-accent);
  border: none;
  border-radius: 50%;
  cursor: pointer;
  transition: all 0.2s ease;
}

#fullscreen-progress-bar:hover::-moz-range-thumb {
  width: 14px;
  height: 14px;
}

/* Time labels */
.time-display-wrapper {
  display: flex;
  justify-content: space-between;
  font-size: 0.85rem;
  font-weight: 500;
  font-variant-numeric: tabular-nums;
  /* Monospaced numbers prevent jitter */
  color: var(--color-text-muted);
  padding: 0 2px;
}

/**
 * ============================================================================
 * COMPONENT: CONTROLS
 * ============================================================================
 */
.control-buttons-large {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 40px;
  /* Spacious gaps */
}

/* Icon Buttons (Shuffle, Repeat, Prev, Next) */
.control-buttons-large .player-btn {
  background: transparent;
  border: none;
  cursor: pointer;
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: all 0.2s ease;
}

.control-buttons-large .player-btn img {
  width: 20px;
  height: 20px;
  filter: brightness(0.5);
  /* Muted state */
  transition: all 0.2s ease;
}

/* Active or Hover states for secondary buttons */
.control-buttons-large .player-btn:hover {
  background-color: var(--color-background-muted);
}

.control-buttons-large .player-btn:hover img {
  filter: brightness(1);
  transform: scale(1.1);
}

.control-buttons-large .player-btn.active img {
  filter: brightness(1) drop-shadow(0 0 4px var(--color-accent));
  /* Active shuffle/repeat */
}

/* Center Group (Prev - Play - Next) */
.center-controls {
  display: flex;
  align-items: center;
  gap: 32px;
}

/* Play/Pause Main Button */
.control-buttons-large .play-pause-btn {
  width: 80px;
  height: 80px;
  background: var(--color-text-primary);
  /* High contrast vs background */
  border-radius: 50%;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275), box-shadow 0.2s ease;
}

.control-buttons-large .play-pause-btn:hover {
  transform: scale(1.05);
  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
}

.control-buttons-large .play-pause-btn:active {
  transform: scale(0.95);
}

.control-buttons-large .play-pause-btn img {
  width: 32px;
  height: 32px;
  /* Icon should be inverse of the button background */
  filter: brightness(0) invert(1);
  /* Makes black icon white if bg is black, etc. */
}

/* Theme Adaptation for Play Button */
body.dark-theme .control-buttons-large .play-pause-btn {
  background: #ffffff;
  /* White button in dark mode */
}

body.dark-theme .control-buttons-large .play-pause-btn img {
  filter: brightness(0);
  /* Black icon on white button */
}

/* Ensure secondary buttons are next/prev icons are slightly larger */
#fullscreen-prev-btn img,
#fullscreen-next-btn img {
  width: 28px;
  height: 28px;
}